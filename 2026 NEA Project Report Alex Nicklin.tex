%! Author = alex-nicklin
%! Date = 10/19/25

% Preamble
\documentclass[11pt]{article}
\AddToHook{cmd/section/before}{\clearpage}
\setlength{\parindent}{0pt}

% Packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{fullpage}
\usepackage{listings}
\usepackage{hyperref}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=blue,
    filecolor=magenta,
    urlcolor=blue,
    pdftitle={2026 NEA Project Report Alex Nicklin},
    pdfpagemode=FullScreen,
}


\usepackage[dvipsnames]{xcolor}

\usepackage[backend=bibtex]{biblatex}
% \usepackage[backend=biber,style=numeric,sortcites,natbib=true,sorting=none]{biblatex}


\addbibresource{2026NEAProjectReportAlexNicklin.bib}


% Document

\begin{document}
\begin{titlepage}
    \begin{center}

        \includegraphics[width=0.4\textwidth]{Media/Logo}

        \vspace*{1cm}

        \Huge
        \textbf{MediaFileRenamer}

        \vspace{0.5cm}
        \LARGE
        A cross-platform tool for renaming media files

        \vspace{1.5cm}

        \textbf{Alexander Nicklin}

        \Large
        Candidate number: 2444\\

        \vspace{1.5cm}

        An AQA A-Level NEA Project (7517)

        \vspace{0.8cm}

        \vspace{1.5cm}

        The Henley College, Henley-on-Thames, Oxfordshire\\
        Centre Number: 62441\\

        \vspace{0.5cm}

        19\textsuperscript{th} October 2025 \\

    \end{center}
\end{titlepage}

\tableofcontents

\listoffigures

\section{Introduction and Declaration}\label{sec:introduction-and-declaration}

\subsection{Introduction}
This goal of this project is the write a \textbf{utility program} for renaming files. The main target will be media files on the Ubuntu operating system.

Most Windows users will use the Bulk Rename Utility\cite{BulkRenameUtility} to rename large numbers of files.
BRU is an excellent and powerful tool but it has a few problems and weaknesses. They are, in order of importance:
\begin{itemize}
    \item Not available on Linux
    \item Limited options to change media file's meta-data
    \item Not intuitive to use. A powerful utility once you understand it, but not easy for most casual users
    \item Code is closed-source
    \item Code is not free for commercial use
\end{itemize}





\textit{The design will be as simple as possible. Adding unnecessary back-ends, such as a database, will not be done. If a well known and maintained library for a feature is commonly available, it will be used.}
\subsection{Declaration}
\textbf{All code - except those modules listed below - and this report is my own work.}

\textbf{No previous or related utility program has been reviewed before designing and coding this project. }

\textbf{No search for other NEA's close to this one has been done. All code and design is my solo attempt to best deliver this project and expand on the programming aspects of the course.}


Code Modules credited to other people:
\begin{itemize}
    \item spdlog\cite{spdlog} is used as a logging library
    \item CLI11\cite{CLI11} is used as a command line parsing library
    \item json\cite{spdlog} is used as a json parsing library
    \item exiv2\cite{spdlog} is used as a EXIF read/write library
\end{itemize}

\section{Analysis}
\subsection{Problem Analysis}
There exists other programs that achieves bulk file renaming. For example, this \href{https://www.bulkrenameutility.co.uk/}{Bulk Rename Utlity} provides most of the functions that I'm planning on implementing in this project. However, there exists no programs (to my knowledge) that can change the EXIF Date Taken Original to a given input. This is what I'm hoping to achieve in my project and one of the main reasons I chose to do this project in the first place.

\subsection{Research}
The main reason to change the EXIF (Exchangeable Image File Format) Date Taken Original on a photo is to ensure they are ordered correctly on file hosting services such as OneDrive and Nextcloud. This becomes an incredibly challenging issue when trying to sort through all of the photos stored.
For example, the pictures below stored on Nextcloud are not ordered:

\begin{figure}[ht]
    \centering
    \includegraphics[width=1\textwidth]{Media/MemoriesNotOrder}
    \caption{Nextcloud Memories not ordered correctly}
    \label{fig:1}
\end{figure}

The computer and corridor pictures are old photos but appear as current/new photos.

Other bulk renaming programs allow you to edit the EXIF Create Datetime (Original) or EXIF Modify Datetime fields, but not the EXIF Date Taken fields (the ones that OneDrive and Nextcloud use to order their photos).

\begin{figure}[ht]
    \centering
    \includegraphics[width=.6\textwidth]{Media/BulkRenameLimitedEXIF}
    \caption{Bulk Rename Utility - EXIF options}
    \label{fig:2}
\end{figure}

\section{Documented Design}
\colorbox{BurntOrange}{The original design was for the Model-View-Controller pattern.}

\begin{figure}[ht]
  \centering
  \includegraphics[width=.6\textwidth]{Media/MVC}
  \caption{Model View Control pattern}
  \label{fig:3}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.6\textwidth]{Media/ModelProblem1}
    \caption{Not sure what this was for}
    \label{fig:4}
\end{figure}


\begin{center}
    \includegraphics[width=.6\textwidth]{Media/ModelProblem2}
\end{center}

\begin{center}
    \includegraphics[width=1\textwidth]{Media/ModelProblem3}
\end{center}

\begin{center}
    \includegraphics[width=1\textwidth]{Media/ModelProblem4}
\end{center}

\includegraphics[width=1\textwidth]{Media/Main Class Diagram}

\includegraphics[width=1\textwidth]{Media/2025-12-09 Media File Renamer}

\section{Technical Solution}

\begin{center}
\textit{The C++ tooling ecosystem is a fractal nightmare of unbridled chaos}\footnote{\url{https://github.com/marzer/tomlplusplus}}
\end{center}

\vspace*{0.25cm}

MediaFileRenamer has been written in C++ using the QT 6 cross-platform UI library \cite{QT}.
I have created build IDE's using CLion under Windows 11 and Ubuntu Desktop 25.10 to code and test this tool.





\linebreak
\textit{Windows installers and Ubuntu packages will be created for end users of this tool.
As this is a programming report, how these installers and packages were created is not documented here.}

\subsection{Creating a Windows Development Environment}
Follow these steps to create a Windows development environment:
\begin{itemize}
    \item Install QT from \url{https://www.qt.io/download-qt-installer-oss}
    \item Install Git from \url{https://git-scm.com/install/windows}
    \item Install CLion from \url{https://www.jetbrains.com/clion/download/?section=windows}
    \item Update all CLion Plugins
    \item Clone the MediaFileRenamer repository from \url{https://github.com/Thentoxd/MediaFileRenamer}
    \item MinGW toolchain dialog should appear - Click Next
    \item In the profile, add the following CMAKE options: \begin{verbatim}"-DCMAKE_PREFIX_PATH=C:\Qt\6.10.0\mingw_64\lib\cmake"\end{verbatim}
    \item Build files should now be created
    \item Now load up main.cpp and click Run. The project should compile and execute the program
    \item Under cmake-build-debug/logs will be the logfile generated from the program
\end{itemize}




\subsection{Creating a Linux Development Environment}

We are using the gcc compiler (version 14.2.0) on Ubuntu Desktop 25.10.


\begin{lstlisting}
chmod a+x qt-online-installer-linux-x64-4.10.0.run
sudo ./qt-online-installer-linux-x64-4.10.0.run

tar -xvzf CLion-2025.2.3.tar.gz

export Qt6_DIR=/opt/Qt/6.9.3/gcc_64

sudo apt-get install build-essential libgl1-mesa-dev
sudo apt-get install libxkbcommon-x11-dev

sudo apt install texlive-full
\end{lstlisting}

\subsection{Tested Deployment Platforms}


\subsection{Legal}
All my source code is available under the GPL licence. GPL is a copyleft license that requires all derivative works to also be released under the GPL, ensuring they remain open source

\smallskip
spdlog\cite{spdlog} is used as a logging library. Code uses the MIT licence, so can be used in both open source and proprietry programs.

CLI11\cite{CLI11} is a command line parser for C++11. (c) 2017-2025 University of Cincinnati.



\subsection{Command Line Parameters}
We are using the third-party CLI11 library to process command line parameters.

\subsection{Runtime Logging}
spdlog\cite{spdlog} is used as a logging library. This has been setup to provide one stream of messages that get sent to the console and to a three rotating 5Mb log files.
Each log sink (console and file) can be set to log all message at or above a certain threshold. The logging also produces source code and line information, eg:

\bigskip
\includegraphics[width=0.8\textwidth]{Media/2025-10-23 11_15_40 logging}

\subsection{File Metadata Processing}
https://github.com/Exiv2/exiv2, https://exiv2.org/examples.html#example1

\subsection{Config File Support}
https://github.com/nlohmann/json - didn't use in the end

toml++ is licensed under the terms of the MIT license - seeÂ \href{https://github.com/marzer/tomlplusplus/blob/master/LICENSE}{LICENSE}.


\subsection{UI Developement}
\includegraphics[width=0.6\textwidth]{Media/2025-10-26 09_01_36-Screenshot First UI MediaFileRenamer}

\subsection{Documention}
This Documentation is written in Latex. To edit and compile the Latex documentation:

\begin{itemize}
    \item Within CLion, install the extensions TeXiFy-IDEA and intellij-pdf-viewer
    \item Install MiKTeX from \url{https://miktex.org/download}
    \item Set MiKTeX to check and install updates automatically. Wait until it says updates are avaiable and do those
    \item I would recommend a restart of your computer at this point
\end{itemize}


This NEA project report now lives in its own GitHub repository: \url{https://github.com/Thentoxd/NEA_Documentation.git}
There a PDF copy of the final report can be downloaded from the out directory.
Below are the steps to clone and edit the source files if changes need to made.


Clone into a new project within CLion.
There are two main source files which make up this report:

\begin{enumerate}
    \item 2026 NEA Project Report Alex Nicklin.tex
    \item 2026 NEA Project Report Alex Nicklin.bib
\end{enumerate}

The first is the Latex source file for the report and the second is the bibliography.

We used BibTeX and MikTeX to compile these two source files to make the final, single report file in PDF format.

The Media subfolder contains any pictures referenced in the .tex file.

In CLion, we need to add two custom Run/Debug configurations to compile the tex and bibliography.

To compile the Latex source, click on Add Configuration

\begin{itemize}
    \item Select the Latex config template
    \item Add a name such as "My Latex Compile"
    \item In the main file to compile, select the .tex file
    \item Leave other settings in place. Click OK
\end{itemize}

\includegraphics[width=0.8\textwidth]{Media/2025-11-11 BibTeX Run_Debug Configurations}

\includegraphics[width=0.8\textwidth]{Media/2025-11-11 LaTeX Run_Debug Configurations.jpg}

To fully rebuild the documentation, you have to do four compiles in this order:

\begin{enumerate}
    \item LaTeX compile
    \item BibTeX compile
    \item LaTeX compile
    \item LaTeX compile
\end{enumerate}

\section{Testing}

\subsection{Unit Testing}
Testing with Catch2\cite{Catch2}

\subsection{Valgrind}
\textit{One of the weakness of C and C++ is memory control. It's easy to create memory leaks and memory errors (malloc 10 bytes, write 20 etc) which can corrupt the stack and result in difficult-to-trace bugs.
To try and fix this, we use the Valgrind library to trace memory usage.}


\section{Evaluation}

This is the Evaluation section

\section{Appendix A - Legal Notices}

CLI11\cite{CLI11} is a command line parser for C++11.
\begin{verbatim}
CLI11 2.6 Copyright (c) 2017-2025 University of Cincinnati, developed by Henry
Schreiner under NSF AWARD 1414736. All rights reserved.

Redistribution and use in source and binary forms of CLI11, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.
3. Neither the name of the copyright holder nor the names of its contributors
   may be used to endorse or promote products derived from this software without
   specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

\end{verbatim}


\printbibliography

\end{document}